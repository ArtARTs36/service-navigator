<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>{{ _appName }}</title>

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

    <meta name="theme-color" content="#7952b3">

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        .clickable-table-row {
            cursor: pointer;
        }

        .clickable-table-row:hover {
            background: #eee;
        }

        .link-gitlab {
            color: #e24329;
        }

        .link-gitlab:hover {
            color: #fc6d26;
        }

        .navbar-link li:hover {
            color: #000;
        }

        .search-dropdown-item {
            cursor: pointer;
        }
    </style>

    <script>
        function setSearchProvider(url, queryParamName) {
            document.getElementById("search-form").setAttribute("action", url);
            document.getElementById("search-form-query").setAttribute("name", queryParamName);
        }

        function runSearch() {
            document.querySelector("#search-form").submit();
        }
    </script>
</head>
<body class="bg-light">

<header class="p-3 mb-3 border-bottom" style="background: #fff">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-dark text-decoration-none">
                {{ _appName }}
            </a>

            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0 navbar-link">
                {% for link in _navBar.Links %}
                    <li><a href="{{ link.URL }}" class="nav-link px-2 link-dark">{{ link.Title }}</a></li>
                {% endfor %}
            </ul>

            {{ _navBar }}

            {% if _navBar.Search.Providers | length > 0 %}
                <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" action="{{ _navBar.Search.Providers[0].URL }}" id="search-form">
                    <input
                            type="search"
                            class="form-control"
                            name="{{ _navBar.Search.Providers[0].QueryParamName }}"
                            placeholder="Search..."
                            aria-label="Search"
                            id="search-form-query"
                    />
                </form>

                {% if _navBar.Search.Providers | length == 1 %}
                    <a href="#" class="d-block link-dark text-decoration-none" onclick="runSearch()">
                        <i class="fa-solid fa-search"></i>
                    </a>
                {% else %}
                    <div class="dropdown">
                        <a href="#" class="d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUser2" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fa-solid fa-search"></i>
                        </a>
                        <ul class="dropdown-menu text-small" aria-labelledby="dropdownUser2">
                            {% for provider in _navBar.Search.Providers %}
                                <li><a class="dropdown-item search-dropdown-item" onclick="setSearchProvider('{{ provider.URL }}', '{{ provider.QueryParamName }}'); runSearch()">{{ provider.Name }}</a></li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            {% endif %}

            <div>&nbsp;</div>
            <div>&nbsp;</div>

            <div class="dropdown text-end">
                <a href="#" class="d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                    {{ _username }}
                </a>
                <ul class="dropdown-menu text-small" aria-labelledby="dropdownUser1">
                    {% for link in _navBar.Profile.Links %}
                        <li><a class="dropdown-item" href="{{ link.URL }}">{{ link.Title }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</header>

<div class="container">
    <div class="bg-light p-5 rounded">
        <table class="table bordered">
            <thead>
            <tr>
                <td scope="col">
                    <strong>Service</strong>
                </td>
                <td scope="col">
                    <strong>Status</strong>
                </td>
                <td scope="col">
                    <strong>Links</strong>
                </td>
            </tr>
            </thead>
            <tbody>
            {% for service in services %}
                {% if service.WebURL %}
                <tr onclick="window.open('{{ service.WebURL }}')" class="clickable-table-row">
                {% else %}
                <tr>
                {% endif %}
                    <td>
                        {{ service.Name }}
                    </td>
                    <td>
                        {{ service.Status }}
                    </td>
                    <td>
                        {% if service.WebURL %}
                            <a href="{{ service.WebURL }}"><i class="fa-solid fa-globe"></i></a>
                        {% endif %}

                        {% if service.VCS.URL %}
                            <a href="{{ service.VCS.URL}}" class="link-{{ service.VCS.Type }}"><i class="fa-brands fa-{{ service.VCS.Type }}"></i></a>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

</body>
</html>
